#!/usr/bin/with-contenv bashio
# ==============================================================================
# Start the example service
# s6-overlay docs: https://github.com/just-containers/s6-overlay
# ==============================================================================

# Add your code here

# Declare variables
declare message

## Get the 'message' key from the user config options.
message=$(bashio::config 'message')

## Print the message the user supplied, defaults to "Hello World..."
#bashio::log.info "${message:="Starting badger..."}"

set -e
set -x

file /usr/bin/badger

bashio::log.info "Running help"
/usr/bin/badger --help || bashio::log.info "Failed with $?"
bashio::log.info "Ran help"

## Run your program
bashio::log.info "Starting badger..."
/usr/bin/badger run || (ex="$?" && bashio::log.info "Failed with $ex" && exit $ex)
bashio::log.info "Started..."
